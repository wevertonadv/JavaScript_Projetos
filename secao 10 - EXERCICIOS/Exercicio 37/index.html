<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercicio 37</title>
</head>

<body>
    <!-- Devemos criar uma classe que simula um carrinho de compras (utilize a forma que preferir)-->
    <!-- Devemos criar a propiedades itens e todos os itens deve ter nesse carrinho e a quantidade total-->
    <!-- Devemos criar os métodos para adicionar e remover os itens-->

    <script>
        class Carrinho {
            constructor(itens, qtd, valorTotal) {
                this.itens = itens;
                this.qtd = qtd;
                this.valorTotal = valorTotal;
            }

            addItem(item) {

                let contador = 0;
                for (let itemCarrinho in this.itens) {
                    if (this.itens[itemCarrinho].id == item.id) {
                        this.itens[itemCarrinho].id == item.qtd;
                        contador = 1;
                    }
                }

                if(contador==0){
                    this.itens.push(item)
                }


                this.qtd += item.qtd;
                this.valorTotal += item.preco * item.qtd;
            }
        
            removeItem(item){
                for(let itemCarrinho in this.itens){
                    if(this.itens[itemCarrinho].id == item.id) {

                        let obj = this.itens[itemCarrinho];
                        let index = this.itens.findIndex(function(obj){ return obj.id == item.id});

                        this.qtd -= this.itens[itemCarrinho].qtd;
                        this.valorTotal -= this.itens[itemCarrinho].preco * this.itens[itemCarrinho].qtd;

                        this.itens.splice(index, 1);




                    }
                }
            }
        
        }

        let carrinho = new Carrinho([
            {
                id: 01,
                nome: "Camisa",
                qtd: 1,
                preco: 20,
            },
            {
                id: 02,
                nome: "Cueca",
                qtd: 3,
                preco: 50
            }
        ], 3, 180)

        console.log(carrinho)

        carrinho.addItem({id:01, nome: "Camisa", qtd:2, preco: 20});
        console.log(carrinho)

        carrinho.addItem({id:03, nome: "Boné", qtd:1, preco: 15});
        console.log(carrinho)

        carrinho.removeItem({id:01, nome: "Camisa", qtd:1, preco: 20});
        console.log(carrinho)

    </script>


</body>

</html>